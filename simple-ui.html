<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
        <meta charset="UTF-8"/>
    </head>
    <body>
        <h2>Rock, paper or scissors?</h2>
        <button id="rock">Rock</button>
        <button id="paper">Paper</button>
        <button id="scissors">Scissors</button>

        <div id="game-progress"></div>

        <script>
            let shape;
            let playerSelection;
            let computerSelection;

            let playerScore = 0;
            let computerScore = 0;

            const gameProgress = document.querySelector('#game-progress');
            const content = document.createElement('p');
            
            const rock = document.querySelector('#rock');
            rock.addEventListener('click', () => {
                console.log("Rock");
                shape = "Rock";
            });
            
            const paper = document.querySelector('#paper');
            paper.addEventListener('click', () => {
                console.log("Paper");
                shape = "Paper";
                });
            
            const scissors = document.querySelector('#scissors');
            scissors.addEventListener('click', () => {
                console.log("Scissors");
                shape = "Scissors";
            });
            
            
            function computerPlay() {
                shapeNum = Math.floor(Math.random() * 3)
                if (shapeNum == 0) {
                    return "Rock";
                }
                else if (shapeNum == 1) {
                    return "Paper";
                }
                else {
                    return "Scissors"
                }
            }

            function playRound(playerSelection, computerSelection) {
                playerSelection = shape;
                computerSelection = computerPlay();

                content.classList.add('content');

                if (playerSelection == computerSelection) {
                    content.textContent = `You have chosen ${playerSelection}
                    and your opponent has chosen ${computerSelection}. It's a draw!
                    The score 'you vs. computer' is ${playerScore}-${computerScore}`;
                    gameProgress.appendChild(content);
                } 
                else if (
                    (playerSelection == "Rock" && computerSelection == "Scissors") ||
                    (playerSelection == "Paper" && computerSelection == "Rock") ||
                    (playerSelection == "Scissors" && computerSelection == "Paper")) {
                        playerScore += 1;
                    content.textContent = `You have chosen ${playerSelection}
                    and your opponent has chosen ${computerSelection}. You win!
                    The score 'you vs. computer' is ${playerScore}-${computerScore}`;
                    gameProgress.appendChild(content);
                }
                else {
                    computerScore += 1;
                    content.textContent = `You have chosen ${playerSelection}
                    and your opponent has chosen ${computerSelection}. You lose!
                    The score 'you vs. computer' is ${playerScore}-${computerScore}`;
                    gameProgress.appendChild(content);
                }
            }

            function capitalize(input) {
                return input.charAt(0).toUpperCase() + input.slice(1).toLowerCase();
            }

            function game() {
                playRound();
                if (playerScore == 5 || computerScore == 5) {
                    showResult();
                }
            }
          
            function interimScore() {
                alert(`It's ${playerScore} against ${computerScore}`)
            }

            function showResult() {
                const result = document.createElement('p');
                if (playerScore > computerScore) {
                    result.textContent = "Congratulations! You've won!";
                    gameProgress.appendChild(result);
                }
                else if (playerScore < computerScore) {
                    result.textContent = "You've lost :(";
                    gameProgress.appendChild(result);
                }
                else {
                    result.textContent = "It's a draw! No one wins";
                    gameProgress.appendChild(result);
                }

                playerScore = 0;
                computerScore = 0;
            }

            const buttons = document.querySelectorAll('button');
            buttons.forEach((button) => {
                button.addEventListener('click', (e) => {
                    game();
                });
            });
        
        </script>
    </body>
</html>